---
/**
 * Badge Component
 * Displays a small status indicator or label with proper icon spacing
 */
import { cn } from '@/lib/cn';

interface Props {
  variant?: 'default' | 'success' | 'warning' | 'error' | 'info' | 'brand';
  size?: 'sm' | 'md';
  /** Show a pulsing dot indicator */
  pulse?: boolean;
  /** Use pill styling (fully rounded with shadow) */
  pill?: boolean;
  class?: string;
}

const { variant = 'default', size = 'md', pulse = false, pill = false, class: className } = Astro.props;

const variants = {
  default: 'bg-secondary text-secondary-foreground border-border',
  success: 'bg-[var(--success-light)] text-[var(--success-foreground)] border-[var(--success)]/20',
  warning: 'bg-[var(--warning-light)] text-[var(--warning-foreground)] border-[var(--warning)]/20',
  error: 'bg-[var(--error-light)] text-[var(--error-foreground)] border-[var(--error)]/20',
  info: 'bg-[var(--info-light)] text-[var(--info-foreground)] border-[var(--info)]/20',
  brand: 'bg-brand-500/10 text-brand-600 border-brand-500/20 dark:text-brand-400',
};

const sizes = {
  sm: 'text-[10px] px-2 py-0.5 gap-1',
  md: 'text-xs px-2.5 py-1 gap-1.5',
};

const pillStyles = pill ? 'rounded-full shadow-sm px-3' : 'rounded-md';
---

<span
  class={cn(
    'inline-flex items-center font-medium border',
    'transition-colors',
    '[&>svg]:shrink-0 [&>svg]:h-3 [&>svg]:w-3',
    variants[variant],
    sizes[size],
    pillStyles,
    className
  )}
>
  {pulse && (
    <span class="flex h-2 w-2 shrink-0 animate-pulse rounded-full bg-brand-500" aria-hidden="true" />
  )}
  <slot />
</span>
